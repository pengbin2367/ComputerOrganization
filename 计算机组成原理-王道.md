# 第1章 计算机系统概述

> #### 考纲内容：
>
> - 计算机系统层次结构
>   - 计算机系统的基本组成
>   - 计算机硬件的基本组成
>   - 计算机软件和硬件的关系
>   - 计算机系统的工作原理：“存储程序”方式、高级语言程序与机器语言程序的转换、程序和指令的执行过程
> - 计算机性能指标
>   - 吞吐量、响应时间、CPU时钟周期、主频、CPI、CPU执行时间
>   - MIPS、MFLOPS、GFLOPS、TFLOPS、PFLOPS、EFLOPS、ZFLOPS

## 1.1 计算机发展历程

### 1.1.1 计算机硬件的发展

#### 1. 计算机的四代变化

```mermaid
graph LR;
	a[电子管时代] --> b[晶体管时代];
	b --> c[中小规模集成电路时代];
	c --> d[超大规模集成电路时代];
```

#### 2. 计算机元件的更新换代

- 摩尔定律
- 半导体存储器的发展
- 微处理器的发展

### 1.1.2 计算机软件的发展

## 1.2 计算机系统层次结构

### 1.2.1 计算机系统组成

硬件系统和软件系统共同构成了一个完整的计算机系统

### 1.2.2 计算机硬件

#### 1. 冯诺依曼机基本思想

- 采用“存储程序”的工作方式
- 计算机硬件系统由运算器、存储器、控制器、输入设备和输出设备5大部件组成
- 指令和数据以同等地位存储在存储器中，形式上没有区别，但计算机可以区分
- 指令和数据均用二进制代码表示。指令由操作码和地址码组成

> “存储程序”的基本思想是：将事先编制好的程序和原始数据送入主存后才能执行，一旦程序被启动执行，就无需人为干预，计算机会自动逐条执行指令，直至程序结束

#### 2. 计算机的功能部件

##### a> 输入设备

##### b> 输出设备

##### c> 存储器

- 主存储器（内存储器），CPU能够直接访问，工作方式是按存储单元的地址进行存取，基本组成如图所示：

  ![image-20230220224929642](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-%E7%8E%8B%E9%81%93.assets/image-20230220224929642.png)

  

- 辅助存储器（外存储器）

> 存储体存放二进制信息，地址寄存器（MAR）存放访存信息，经过地址译码后找到所选的存储单元。数据寄存器（MDR）用于暂存要从存储器中读或写的信息，时序控制逻辑用于产生存储器操作所需的各种时序信号
>
> MAR用于寻址，其位数对应着存储单元的个数，如MAR为10位，则有2^10^ = 1024个存储单元，记为1K。MAR长度与PC长度相等
>
> MDR的位数和存储字长相等，一般为字节的2次幂的整数倍
>
> MAR与MDR虽然是存储器的一部分，但在现代计算机中却是存在于CPU中的，另外，高速缓存（Cache）也是在CPU中

##### d> 运算器

运算器核心是算术逻辑单元（Arithmetic and Logical Unit，ALU）。运算器包含若干通用寄存器，用于暂存操作数和中间结果，如累加器（ACC）、乘商寄存器（MQ）、操作数寄存器（X）、变址寄存器（IX）、基址寄存器（BR）等，其中前三个寄存器是必须的

运算器内还有程序状态寄存器（PSW），也称标志寄存器，用于存放ALU运算得到的一些标志信息或处理机的状态信息，如结果是否溢出、有无进位或借位、结果是否为负等

##### e> 控制器

控制器由程序计数器（PC）、指令寄存器（IR）和控制单元（CU）组成。

一般将运算器和控制器集成到同一芯片上，称为中央处理器。CPU和主存储器共同构成主机，而除主机外的其他硬件装置统称为外部设备，简称外设

![image-20230226201855952](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-%E7%8E%8B%E9%81%93.assets/image-20230226201855952.png)

### 1.2.3 计算机软件

#### 1. 系统软件和应用软件

#### 2. 三个级别的语言

机器语言、汇编语言和高级语言

计算机无法之间理解和执行高级语言程序，需要将高级语言程序转换为机器语言程序，通常把进行这种转换的软件系统称为翻译程序：

- 汇编程序（汇编器）。将汇编语言程序翻译成机器语言
- 解释程序（解释器）。将源程序中的语句按执行顺序逐条翻译成机器指令并立即执行
- 编译程序（编译器）。将高级语言程序翻译成汇编语言或机器语言程序

#### 3. 软件和硬件的逻辑功能等价性

### 1.2.4 计算机系统的层次结构

![image-20230226205515420](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-%E7%8E%8B%E9%81%93.assets/image-20230226205515420.png)

层次之间的关系紧密，下层是上层的基础，上层是下层的扩展

软件和硬件之间的界面就是指令集体系结构（ISA），ISA定义了一台计算机可以执行的所有指令的集合，每条指令规定了计算机执行什么操作，以及所处理的的操作数存放的地址空间和操作数类型。

### 1.2.5 计算机系统的工作原理

#### 1. “存储程序”工作方式

![image-20230226210731906](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-%E7%8E%8B%E9%81%93.assets/image-20230226210731906.png)

#### 2. 从源程序到可执行文件

![image-20230226215211762](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-%E7%8E%8B%E9%81%93.assets/image-20230226215211762.png)

预处理阶段 -----> 编译阶段 -----> 汇编阶段 -----> 链接阶段

#### 3. 程序执行过程的描述

#### 4. 指令执行过程的描述

以取数指令为例，其信息流程如下：

1. 取指令：PC ---> MAR ---> M ---> MDR ---> IR
2. 分析指令：OP(IR) ---> CU
3. 执行指令：Ad(IR) ---> MAR ---> M ---> MDR ---> ACC

## 1.3 计算机的性能指标

### 1.3.1 计算机的主要性能指标

#### 1. 字长

指计算机进行一次整数运算所能处理的二进制数据的位数

#### 2. 数据通路带宽

数据总线一次所能并行传送信息的位数

> 各个子系统通过数据总线连接形成的数据传送路径称为数据通路

#### 3. 主存容量

主存储器所能存储信息的最大容量

#### 4. 运算速度

##### a> 吞吐量和响应时间

吞吐量指系统在单位时间内处理请求的数量，系统吞吐量主要取决于主存的存取周期

##### b> 主频和CPU时钟周期

CPU时钟周期，主频的倒数，是CPU中最小的时间单位

主频（CPU时钟频率），机器内部主时钟的频率

##### c> CPI（Cycle Per Instruction）

执行一条指令所需的时钟周期数

##### d> CPU执行时间

$$
CPU执行时间 = \frac {CPU时钟周期数} {主频} = \frac {指令条数 \times CPI} {主频}
$$

##### e> MIPS（Million Instructions Per Second），每秒执行多少百万条指令

$$
MIPS = \frac {指令条数}{执行时间 \times 10^6} = \frac {主频} {CPI \times 10^6}
$$

##### f> MFLOPS、GFLOPS、TFLOPS、PFLOPS、EFLOPS和ZFLOPS

#### 5. 基准程序

### 1.3.2 几个专业术语

#### 1. 系列机

具有基本相同的体系结构，使用相同基本指令系统的多个不同型号的计算机组成的一个产品系列

#### 2. 兼容

指软件和硬件的通用性

#### 3. 软件可移植性

指把使用在某个系列计算机中的软件直接或进行很少的修改就能运行在另一个系列计算机中的可能性

#### 4. 固件

将程序固化在ROM中组成的部件